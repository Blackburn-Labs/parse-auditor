!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t():"function"==typeof define&&define.amd?define([],t):"object"==typeof exports?exports["parse-auditor"]=t():e["parse-auditor"]=t()}(global,(function(){return function(e){var t={};function r(n){if(t[n])return t[n].exports;var o=t[n]={i:n,l:!1,exports:{}};return e[n].call(o.exports,o,o.exports,r),o.l=!0,o.exports}return r.m=e,r.c=t,r.d=function(e,t,n){r.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},r.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},r.t=function(e,t){if(1&t&&(e=r(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(r.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var o in e)r.d(n,o,function(t){return e[t]}.bind(null,o));return n},r.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return r.d(t,"a",t),t},r.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},r.p="",r(r.s=0)}([function(e,t){function r(e,t,r,n,o,i,f){try{var u=e[i](f),s=u.value}catch(e){return void r(e)}u.done?t(s):Promise.resolve(s).then(n,o)}function n(e){return function(){var t=this,n=arguments;return new Promise((function(o,i){var f=e.apply(t,n);function u(e){r(f,o,i,u,s,"next",e)}function s(e){r(f,o,i,u,s,"throw",e)}u(void 0)}))}}const o={classPrefix:"",classPostfix:"_AUD",fieldPrefix:"meta_",fieldPostfix:"",parseSDK:Parse},i=function(){var e=n((function*(e,t,r,n,i=o){const f=new(Parse.Object.extend(`${i.classPrefix}${r}${i.classPostfix}`));for(const e in n.attributes)Object.prototype.hasOwnProperty.call(n.attributes,e)&&f.set(e,n.attributes[e]);f.set(`${i.fieldPrefix}actor${i.fieldPostfix}`,e),f.set(`${i.fieldPrefix}action${i.fieldPostfix}`,t),f.set(`${i.fieldPrefix}class${i.fieldPostfix}`,r),f.set(`${i.fieldPrefix}subject${i.fieldPostfix}`,n),f.save()}));return function(t,r,n,o){return e.apply(this,arguments)}}(),f=(e,t=[],r={})=>{const f=r.classPrefix||o.classPrefix,u=r.classPostfix||o.classPostfix,s=r.fieldPrefix||o.fieldPrefix,c=r.fieldPostfix||o.fieldPostfix,a=r.parseSDK||o.parseSDK,l={classPrefix:f,classPostfix:u,fieldPrefix:s,fieldPostfix:c,parseSDK:a};e.forEach(e=>{a.Cloud.afterSave(e,function(){var t=n((function*(t){return i(t.user,"SAVE",e,t.object,l)}));return function(e){return t.apply(this,arguments)}}()),a.Cloud.afterDelete(e,function(){var t=n((function*(t){return i(t.user,"DELETE",e,t.object,l)}));return function(e){return t.apply(this,arguments)}}())}),t.forEach(e=>{a.Cloud.afterFind(e,function(){var t=n((function*(t){return t.objects.forEach(function(){var r=n((function*(r){return i(t.user,"FIND",e,r,l)}));return function(e){return r.apply(this,arguments)}}()),t.objects}));return function(e){return t.apply(this,arguments)}}())})},u=e.exports=f;u.init=f,u.audit=i,u.CONFIG_DEFAULTS=o}])}));